<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplified Paycheck Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        h1, h2, h3 { color: #333; }
        .page { display: none; }
        .page.active { display: block; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="number"], select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        button:hover { background-color: #0056b3; }
        .explanation { background-color: #f8f8f8; border-left: 4px solid #007bff; padding: 10px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .header { text-align: left; margin-bottom: 20px; }
        .logo { max-width: 200px; height: auto; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="header">
        <img src="https://via.placeholder.com/200x50.png?text=FinMango+Logo" alt="FinMango Logo" class="logo">
        <h1>Simplified Paycheck Calculator</h1>
    </div>

    <div id="introPage" class="page active">
        <h2>Welcome to Your Comprehensive Paycheck Calculator</h2>
        <div class="explanation">
            <p>This calculator, a collaboration between <a href="https://finmango.org" target="_blank">FinMango</a> and <a href="https://modernhusbands.com" target="_blank">Modern Husbands</a>, helps you evaluate your financial situation across different cities in the United States. It considers factors such as:</p>
            <ul>
                <li>Your annual salary</li>
                <li>Federal, state, and local taxes</li>
                <li>Cost of living components</li>
            </ul>
            <p>Compare up to three cities to help make informed decisions about where to live and work.</p>
        </div>
        <button onclick="showPage('locationPage')">Let's Get Started</button>
    </div>
    
    <div id="locationPage" class="page">
        <h2>Select Cities to Compare</h2>
        <div class="explanation">
            <p>Choose up to three cities you'd like to compare.</p>
        </div>
        <div class="form-group">
            <label for="location1">City 1:</label>
            <select id="location1" required></select>
        </div>
        <div class="form-group">
            <label for="location2">City 2 (optional):</label>
            <select id="location2"></select>
        </div>
        <div class="form-group">
            <label for="location3">City 3 (optional):</label>
            <select id="location3"></select>
        </div>
        <button onclick="showPage('introPage')">Previous</button>
        <button onclick="showPage('salaryPage')">Next</button>
    </div>

    <div id="salaryPage" class="page">
        <h2>Enter Your Salary Information</h2>
        <div class="explanation">
            <p>Provide your annual salary. This information will be used to calculate your take-home pay after taxes and compare it with the cost of living in each selected city.</p>
        </div>
        <div class="form-group">
            <label for="salary">Annual Salary ($):</label>
            <input type="number" id="salary" required>
        </div>
        <button onclick="showPage('locationPage')">Previous</button>
        <button onclick="calculateResults()">Calculate Results</button>
    </div>

    <div id="resultsPage" class="page">
        <h2>Your Paycheck and Cost of Living Comparison</h2>
        <div class="explanation">
            <p>Below is a summary of your financial situation in each selected city. This includes your take-home pay and annual expenses.</p>
        </div>
        <table id="resultsTable">
            <thead>
                <tr>
                    <th>Category</th>
                    <th id="location1Header"></th>
                    <th id="location2Header"></th>
                    <th id="location3Header"></th>
                </tr>
            </thead>
            <tbody>
                <!-- Results will be inserted here by JavaScript -->
            </tbody>
        </table>
        <button onclick="showPage('locationPage')">Start Over</button>
    </div>

    <script>
    // Sample data for cities, tax rates, and cost of living (you'd replace this with real data)
    const locations = [
        { name: "New York, NY", stateTax: 0.0685, localTax: 0.03876, costIndex: 1.8 },
        { name: "Los Angeles, CA", stateTax: 0.0930, localTax: 0, costIndex: 1.5 },
        { name: "Chicago, IL", stateTax: 0.0495, localTax: 0.0925, costIndex: 1.2 },
        { name: "Houston, TX", stateTax: 0, localTax: 0, costIndex: 0.95 },
        { name: "Phoenix, AZ", stateTax: 0.0459, localTax: 0, costIndex: 1.05 },
        { name: "Philadelphia, PA", stateTax: 0.0307, localTax: 0.038907, costIndex: 1.15 },
        { name: "Boston, MA", stateTax: 0.05, localTax: 0, costIndex: 1.5 },
        { name: "Miami, FL", stateTax: 0, localTax: 0, costIndex: 1.2 },
        { name: "Atlanta, GA", stateTax: 0.0575, localTax: 0, costIndex: 1.0 },
        { name: "Cleveland, OH", stateTax: 0.0399, localTax: 0.02, costIndex: 0.9 },
        { name: "Cincinnati, OH", stateTax: 0.0399, localTax: 0.021, costIndex: 0.9 },
        { name: "Columbus, OH", stateTax: 0.0399, localTax: 0.025, costIndex: 0.95 },
        { name: "Nashville, TN", stateTax: 0, localTax: 0, costIndex: 1.05 },
        { name: "Austin, TX", stateTax: 0, localTax: 0, costIndex: 1.1 },
        { name: "Seattle, WA", stateTax: 0, localTax: 0, costIndex: 1.5 },
        { name: "San Francisco, CA", stateTax: 0.0930, localTax: 0, costIndex: 1.9 },
        { name: "Minneapolis, MN", stateTax: 0.0785, localTax: 0, costIndex: 1.05 }
    ];

    // Populate location dropdowns
    function populateLocations() {
        const selects = [document.getElementById('location1'), document.getElementById('location2'), document.getElementById('location3')];
        selects.forEach(select => {
            select.innerHTML = '<option value="">Select a city</option>';
            locations.forEach(location => {
                const option = document.createElement('option');
                option.value = location.name;
                option.textContent = location.name;
                select.appendChild(option);
            });
        });
    }

    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
    }

    // Initialize the calculator
    populateLocations();
function calculateResults() {
    const salary = parseFloat(document.getElementById('salary').value);
    const selectedLocations = [
        document.getElementById('location1').value,
        document.getElementById('location2').value,
        document.getElementById('location3').value
    ].filter(Boolean);

    const results = selectedLocations.map(locationName => {
        const location = locations.find(loc => loc.name === locationName);
        const federalTax = calculateFederalTax(salary);
        const stateTax = salary * location.stateTax;
        const localTax = salary * location.localTax;
        const socialSecurity = Math.min(salary * 0.062, 9114); // 2021 cap
        const medicare = salary * 0.0145;
        const totalTax = federalTax + stateTax + localTax + socialSecurity + medicare;
        const takehomePay = salary - totalTax;

        // Estimate annual expenses based on cost of living index
        const baseExpenses = 40000; // Baseline annual expenses for a cost index of 1.0
        const annualExpenses = baseExpenses * location.costIndex;

        return {
            location: locationName,
            takehomePay: takehomePay,
            annualExpenses: annualExpenses,
            remainingMoney: takehomePay - annualExpenses
        };
    });

    displayResults(results);
    showPage('resultsPage');
}

function calculateFederalTax(salary) {
    // 2021 tax brackets (simplified)
    if (salary <= 9950) return salary * 0.10;
    if (salary <= 40525) return 995 + (salary - 9950) * 0.12;
    if (salary <= 86375) return 4664 + (salary - 40525) * 0.22;
    if (salary <= 164925) return 14751 + (salary - 86375) * 0.24;
    if (salary <= 209425) return 33603 + (salary - 164925) * 0.32;
    if (salary <= 523600) return 47843 + (salary - 209425) * 0.35;
    return 157804.25 + (salary - 523600) * 0.37;
}

function displayResults(results) {
    const table = document.getElementById('resultsTable');
    const tbody = table.querySelector('tbody');
    tbody.innerHTML = '';

    results.forEach((result, index) => {
        document.getElementById(`location${index + 1}Header`).textContent = result.location;
    });

    const categories = [
        { name: 'Take-Home Pay', key: 'takehomePay' },
        { name: 'Annual Expenses', key: 'annualExpenses' },
        { name: 'Remaining Money', key: 'remainingMoney' }
    ];

    categories.forEach(category => {
        const row = tbody.insertRow();
        const cellCategory = row.insertCell();
        cellCategory.textContent = category.name;

        results.forEach(result => {
            const cell = row.insertCell();
            const value = result[category.key];
            cell.textContent = `$${value.toFixed(2)}`;
            
            // Add color coding for Remaining Money
            if (category.key === 'remainingMoney') {
                if (value > 0) {
                    cell.style.color = 'green';
                } else if (value < 0) {
                    cell.style.color = 'red';
                }
            }
        });
    });
}

    </script>
</body>
</html>
