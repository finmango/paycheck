<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Paycheck Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        h1, h2, h3 { color: #333; }
        .page { display: none; }
        .page.active { display: block; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="number"], input[type="text"], select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        button:hover { background-color: #0056b3; }
        .explanation { background-color: #f8f8f8; border-left: 4px solid #007bff; padding: 10px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .header { text-align: left; margin-bottom: 20px; }
        .logo { max-width: 200px; height: auto; margin-bottom: 10px; }
        .location-input { display: flex; gap: 10px; align-items: flex-end; }
        .location-input input { flex-grow: 1; }
        .location-input button { flex-shrink: 0; }
    </style>
</head>
<body>
    <div class="header">
        <img src="logo.png" alt="FinMango and ModernHusbands Logo" class="logo">
        <h1>Advanced Paycheck Calculator</h1>
    </div>

    <div id="introPage" class="page active">
        <h2>Welcome to Your Comprehensive Paycheck Calculator</h2>
        <div class="explanation">
            <p>This advanced calculator, a collaboration between <a href="https://finmango.org" target="_blank">FinMango</a> and <a href="https://modernhusbands.com" target="_blank">Modern Husbands</a>, helps you evaluate your financial situation across different locations in the United States. It considers factors such as:</p>
            <ul>
                <li>Your annual salary</li>
                <li>Federal, state, and local taxes</li>
                <li>Cost of living components (housing, transportation, food, etc.)</li>
            </ul>
            <p>You can now compare locations by selecting from our expanded list of cities, entering a city name, or providing a zip code. This tool will help you make informed decisions about where to live and work.</p>
        </div>
        <button onclick="showPage('locationPage')">Let's Get Started</button>
    </div>
    
    <div id="locationPage" class="page">
        <h2>Select Locations to Compare</h2>
        <div class="explanation">
            <p>Choose up to three locations you'd like to compare. You can select from the dropdown, enter a city name, or provide a zip code for each location.</p>
        </div>
        <div class="form-group">
            <label for="location1">Location 1:</label>
            <div class="location-input">
                <select id="location1"></select>
                <input type="text" id="cityInput1" placeholder="Enter city name">
                <input type="text" id="zipInput1" placeholder="Enter zip code">
                <button onclick="searchLocation(1)">Search</button>
            </div>
        </div>
        <div class="form-group">
            <label for="location2">Location 2 (optional):</label>
            <div class="location-input">
                <select id="location2"></select>
                <input type="text" id="cityInput2" placeholder="Enter city name">
                <input type="text" id="zipInput2" placeholder="Enter zip code">
                <button onclick="searchLocation(2)">Search</button>
            </div>
        </div>
        <div class="form-group">
            <label for="location3">Location 3 (optional):</label>
            <div class="location-input">
                <select id="location3"></select>
                <input type="text" id="cityInput3" placeholder="Enter city name">
                <input type="text" id="zipInput3" placeholder="Enter zip code">
                <button onclick="searchLocation(3)">Search</button>
            </div>
        </div>
        <button onclick="showPage('introPage')">Previous</button>
        <button onclick="showPage('salaryPage')">Next</button>
    </div>

    <div id="salaryPage" class="page">
        <h2>Enter Your Salary Information</h2>
        <div class="explanation">
            <p>Provide your occupation and annual salary. This information will be used to calculate your take-home pay after taxes and compare it with the cost of living in each selected location.</p>
        </div>
        <div class="form-group">
            <label for="occupation">Occupation:</label>
            <input type="text" id="occupation" placeholder="Enter your occupation">
        </div>
        <div class="form-group">
            <label for="salary">Annual Salary ($):</label>
            <input type="number" id="salary" required>
        </div>
        <button onclick="showPage('locationPage')">Previous</button>
        <button onclick="calculateResults()">Calculate Results</button>
    </div>

    <div id="resultsPage" class="page">
        <h2>Your Paycheck and Cost of Living Breakdown</h2>
        <div class="explanation">
            <p>Below is a detailed breakdown of your financial situation in each selected location. This includes:</p>
            <ul>
                <li>Your gross pay and take-home pay after taxes</li>
                <li>A breakdown of various taxes (federal, state, local, etc.)</li>
                <li>Monthly cost of living expenses (housing, transportation, food, etc.)</li>
                <li>Annual cost of living and remaining money after expenses</li>
            </ul>
            <p>Use this information to compare how your financial situation might differ across these locations.</p>
        </div>
        <table id="resultsTable">
            <thead>
                <tr>
                    <th>Category</th>
                    <th id="location1Header"></th>
                    <th id="location2Header"></th>
                    <th id="location3Header"></th>
                </tr>
            </thead>
            <tbody>
                <!-- Results will be inserted here by JavaScript -->
            </tbody>
        </table>
        <button onclick="showPage('locationPage')">Start Over</button>
    </div>

    <script>
        // </body>
</html>
// Sample data for locations, tax rates, and cost of living (you'd replace this with real data)
const locations = [
    { 
        name: "New York, NY", 
        stateTax: 0.0685, 
        localTax: 0.03876,
        costOfLiving: {
            housing: 3000,
            transportation: 150,
            food: 500,
            utilities: 150,
            healthcare: 400,
            other: 500
        }
    },
    { 
        name: "Los Angeles, CA", 
        stateTax: 0.0930, 
        localTax: 0,
        costOfLiving: {
            housing: 2500,
            transportation: 200,
            food: 400,
            utilities: 120,
            healthcare: 350,
            other: 450
        }
    },
    { 
        name: "Chicago, IL", 
        stateTax: 0.0495, 
        localTax: 0.0925,
        costOfLiving: {
            housing: 1800,
            transportation: 100,
            food: 350,
            utilities: 130,
            healthcare: 300,
            other: 400
        }
    },
    { 
        name: "Houston, TX", 
        stateTax: 0, 
        localTax: 0,
        costOfLiving: {
            housing: 1500,
            transportation: 120,
            food: 300,
            utilities: 140,
            healthcare: 320,
            other: 380
        }
    },
    { 
        name: "Phoenix, AZ", 
        stateTax: 0.0459, 
        localTax: 0,
        costOfLiving: {
            housing: 1400,
            transportation: 110,
            food: 280,
            utilities: 150,
            healthcare: 310,
            other: 360
        }
    },
    { 
        name: "Philadelphia, PA", 
        stateTax: 0.0307, 
        localTax: 0.038907,
        costOfLiving: {
            housing: 1600,
            transportation: 130,
            food: 320,
            utilities: 135,
            healthcare: 330,
            other: 390
        }
    },
    // Add more locations as needed
];

// Populate location dropdowns
function populateLocations() {
    const selects = [document.getElementById('location1'), document.getElementById('location2'), document.getElementById('location3')];
    selects.forEach(select => {
        select.innerHTML = '<option value="">Select a location</option>';
        locations.forEach(location => {
            const option = document.createElement('option');
            option.value = location.name;
            option.textContent = location.name;
            select.appendChild(option);
        });
    });
}

function showPage(pageId) {
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
}

function searchLocation(index) {
    const cityInput = document.getElementById(`cityInput${index}`).value;
    const zipInput = document.getElementById(`zipInput${index}`).value;
    const select = document.getElementById(`location${index}`);

    // In a real application, you would make an API call here to get the location data
    // For this example, we'll just use the first matching city in our sample data
    let matchedLocation;
    if (cityInput) {
        matchedLocation = locations.find(loc => loc.name.toLowerCase().includes(cityInput.toLowerCase()));
    } else if (zipInput) {
        // For this example, we'll just pretend the zip code matches the first location
        matchedLocation = locations[0];
    }

    if (matchedLocation) {
        select.value = matchedLocation.name;
    } else {
        alert("Location not found. Please try again or select from the dropdown.");
    }
}

function calculateResults() {
    const salary = parseFloat(document.getElementById('salary').value);
    const selectedLocations = [
        document.getElementById('location1').value,
        document.getElementById('location2').value,
        document.getElementById('location3').value
    ].filter(Boolean);

    const results = selectedLocations.map(locationName => {
        const location = locations.find(loc => loc.name === locationName);
        const federalTax = calculateFederalTax(salary);
        const stateTax = salary * location.stateTax;
        const localTax = salary * location.localTax;
        const socialSecurity = Math.min(salary * 0.062, 9114); // 2021 cap
        const medicare = salary * 0.0145;
        const totalTax = federalTax + stateTax + localTax + socialSecurity + medicare;
        const takehomePay = salary - totalTax;

        // Calculate annual cost of living
        const annualCostOfLiving = Object.values(location.costOfLiving).reduce((a, b) => a + b, 0) * 12;

        return {
            location: locationName,
            grossPay: salary,
            federalTax,
            stateTax,
            localTax,
            socialSecurity,
            medicare,
            totalTax,
            takehomePay,
            costOfLiving: location.costOfLiving,
            annualCostOfLiving,
            remainingMoney: takehomePay - annualCostOfLiving
        };
    });

    displayResults(results);
    showPage('resultsPage');
}

function calculateFederalTax(salary) {
    // 2021 tax brackets (simplified)
    if (salary <= 9950) return salary * 0.10;
    if (salary <= 40525) return 995 + (salary - 9950) * 0.12;
    if (salary <= 86375) return 4664 + (salary - 40525) * 0.22;
    if (salary <= 164925) return 14751 + (salary - 86375) * 0.24;
    if (salary <= 209425) return 33603 + (salary - 164925) * 0.32;
    if (salary <= 523600) return 47843 + (salary - 209425) * 0.35;
    return 157804.25 + (salary - 523600) * 0.37;
}

function displayResults(results) {
    const table = document.getElementById('resultsTable');
    const tbody = table.querySelector('tbody');
    tbody.innerHTML = '';

    results.forEach((result, index) => {
        document.getElementById(`location${index + 1}Header`).textContent = result.location;
    });

    const categories = [
        { name: 'Gross Pay', key: 'grossPay' },
        { name: 'Federal Tax', key: 'federalTax' },
        { name: 'State Tax', key: 'stateTax' },
        { name: 'Local Tax', key: 'localTax' },
        { name: 'Social Security', key: 'socialSecurity' },
        { name: 'Medicare', key: 'medicare' },
        { name: 'Total Tax', key: 'totalTax' },
        { name: 'Take-Home Pay', key: 'takehomePay' },
        { name: 'Monthly Housing', key: 'costOfLiving.housing' },
        { name: 'Monthly Transportation', key: 'costOfLiving.transportation' },
        { name: 'Monthly Food', key: 'costOfLiving.food' },
        { name: 'Monthly Utilities', key: 'costOfLiving.utilities' },
        { name: 'Monthly Healthcare', key: 'costOfLiving.healthcare' },
        { name: 'Monthly Other Expenses', key: 'costOfLiving.other' },
        { name: 'Annual Cost of Living', key: 'annualCostOfLiving' },
        { name: 'Remaining Money (Annual)', key: 'remainingMoney' }
    ];

    categories.forEach(category => {
        const row = tbody.insertRow();
        const cellCategory = row.insertCell();
        cellCategory.textContent = category.name;

        results.forEach(result => {
            const cell = row.insertCell();
            let value;
            if (category.key.includes('.')) {
                const [obj, prop] = category.key.split('.');
                value = result[obj][prop];
            } else {
                value = result[category.key];
            }
            cell.textContent = `$${value.toFixed(2)}`;
        });
    });
}

// Initialize the calculator
populateLocations();

    </script>
