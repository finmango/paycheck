<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paycheck Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body { 
            font-family: 'Roboto', sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            line-height: 1.6; 
            color: #333;
            background-color: #f5f5f5;
        }
        h1, h2, h3 { color: #1976D2; }
        .page { display: none; }
        .page.active { display: block; }
        .form-group { margin-bottom: 20px; }
        label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: 500; 
            color: #555;
        }
        input[type="text"], select { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            font-size: 16px;
        }
        button { 
            padding: 10px 20px; 
            background-color: #1976D2; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            margin-right: 10px; 
            margin-bottom: 10px;
            font-size: 16px;
        }
        .explanation { 
            background-color: #E3F2FD; 
            border-left: 4px solid #1976D2; 
            padding: 15px; 
            margin-bottom: 20px; 
        }
        .section { 
            margin-bottom: 30px; 
            background-color: white;
            border-radius: 4px;
            padding: 20px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
        .breakdown { 
            display: none; 
            margin-top: 10px; 
        }
        .breakdown.active { 
            display: block; 
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Paycheck Calculator</h1>
    </div>

    <div id="introPage" class="page active">
        <h2>Welcome to Your Comprehensive Paycheck Calculator</h2>
        <div class="explanation">
            <p>This calculator helps you evaluate your financial situation across different cities in the United States.</p>
        </div>
        <button onclick="showPage('locationPage')">Let's Get Started</button>
    </div>
    
    <div id="locationPage" class="page">
        <h2>Select Cities to Compare</h2>
        <div class="section">
            <div class="form-group">
                <label for="location1">City 1:</label>
                <select id="location1" required></select>
            </div>
            <div class="form-group">
                <label for="location2">City 2 (optional):</label>
                <select id="location2"></select>
            </div>
            <div class="form-group">
                <label for="location3">City 3 (optional):</label>
                <select id="location3"></select>
            </div>
        </div>
        <button onclick="showPage('introPage')">Previous</button>
        <button onclick="showPage('salaryPage')">Next</button>
    </div>

    <div id="salaryPage" class="page">
        <h2>Enter Your Salary Information</h2>
        <div class="section">
            <div class="form-group">
                <label for="salary">Annual Salary ($):</label>
                <input type="text" id="salary" required>
            </div>
        </div>
        <button onclick="showPage('locationPage')">Previous</button>
        <button onclick="calculateResults()">Calculate Results</button>
    </div>

    <div id="resultsPage" class="page">
        <h2>Your Paycheck and Cost of Living Comparison</h2>
        <div id="resultsContainer"></div>
        <button onclick="showPage('locationPage')">Start Over</button>
    </div>

    <script>
    const locations = [
        { name: "Atlanta, GA", stateTax: 0.0575, localTax: 0, costIndex: 1.0 },
        { name: "Boston, MA", stateTax: 0.05, localTax: 0, costIndex: 1.5 },
        { name: "Chicago, IL", stateTax: 0.0495, localTax: 0.0925, costIndex: 1.2 },
        { name: "Dallas, TX", stateTax: 0, localTax: 0, costIndex: 1.0 },
        { name: "Los Angeles, CA", stateTax: 0.0930, localTax: 0, costIndex: 1.5 },
        { name: "New York, NY", stateTax: 0.0685, localTax: 0.03876, costIndex: 1.8 },
        { name: "San Francisco, CA", stateTax: 0.0930, localTax: 0, costIndex: 1.9 },
        { name: "Seattle, WA", stateTax: 0, localTax: 0, costIndex: 1.5 }
    ];

    function populateLocations() {
        const selects = [document.getElementById('location1'), document.getElementById('location2'), document.getElementById('location3')];
        selects.forEach(select => {
            select.innerHTML = '<option value="">Select a city</option>';
            locations.forEach(location => {
                const option = document.createElement('option');
                option.value = location.name;
                option.textContent = location.name;
                select.appendChild(option);
            });
        });
    }

    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
    }

    function toggleBreakdown(id) {
        const breakdown = document.getElementById(id);
        breakdown.classList.toggle('active');
    }

    function calculateFederalTax(salary) {
        if (salary <= 9950) return salary * 0.10;
        if (salary <= 40525) return 995 + (salary - 9950) * 0.12;
        if (salary <= 86375) return 4664 + (salary - 40525) * 0.22;
        if (salary <= 164925) return 14751 + (salary - 86375) * 0.24;
        if (salary <= 209425) return 33603 + (salary - 164925) * 0.32;
        if (salary <= 523600) return 47843 + (salary - 209425) * 0.35;
        return 157804.25 + (salary - 523600) * 0.37;
    }

    function formatMoney(amount) {
        return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
    }

    function calculateResults() {
        const salary = parseFloat(document.getElementById('salary').value.replace(/[^0-9.]/g, ''));
        const selectedLocations = [
            document.getElementById('location1').value,
            document.getElementById('location2').value,
            document.getElementById('location3').value
        ].filter(Boolean);

        if (!salary || selectedLocations.length === 0) {
            alert('Please enter your salary and select at least one location.');
            return;
        }

        const results = selectedLocations.map(locationName => {
            const location = locations.find(loc => loc.name === locationName);
            const federalTax = calculateFederalTax(salary);
            const stateTax = salary * location.stateTax;
            const localTax = salary * location.localTax;
            const socialSecurity = Math.min(salary * 0.062, 9114);
            const medicare = salary * 0.0145;
            const totalTax = federalTax + stateTax + localTax + socialSecurity + medicare;
            const takehomePay = salary - totalTax;

            const baseExpenses = 40000;
            const annualExpenses = baseExpenses * location.costIndex;

            return {
                location: locationName,
                grossPay: salary,
                federalTax: federalTax,
                stateTax: stateTax,
                localTax: localTax,
                socialSecurity: socialSecurity,
                medicare: medicare,
                totalTax: totalTax,
                takehomePay: takehomePay,
                annualExpenses: annualExpenses,
                remainingMoney: takehomePay - annualExpenses,
                costIndex: location.costIndex
            };
        });

        displayResults(results);
        showPage('resultsPage');
    }

    function displayResults(results) {
        const container = document.getElementById('resultsContainer');
        container.innerHTML = '';

        results.forEach((result, index) => {
            const resultDiv = document.createElement('div');
            resultDiv.className = 'section';
            resultDiv.innerHTML = `
                <h3>${result.location}</h3>
                <p>Take-Home Pay: ${formatMoney(result.takehomePay)}</p>
                <p>Annual Expenses: ${formatMoney(result.annualExpenses)}</p>
                <p>Remaining Money: ${formatMoney(result.remainingMoney)}</p>
                <button onclick="toggleBreakdown('breakdown-${index}')">Show Breakdown</button>
                <div id="breakdown-${index}" class="breakdown">
                    <h4>Detailed Breakdown</h4>
                    <p>Gross Pay: ${formatMoney(result.grossPay)}</p>
                    <p>Federal Tax: ${formatMoney(result.federalTax)}</p>
                    <p>State Tax: ${formatMoney(result.stateTax)}</p>
                    <p>Local Tax: ${formatMoney(result.localTax)}</p>
                    <p>Social Security: ${formatMoney(result.socialSecurity)}</p>
                    <p>Medicare: ${formatMoney(result.medicare)}</p>
                    <p>Total Tax: ${formatMoney(result.totalTax)}</p>
                    <p>Take-Home Pay: ${formatMoney(result.takehomePay)}</p>
                    <p>Cost of Living Index: ${result.costIndex.toFixed(2)}</p>
                    <p>Estimated Annual Expenses: ${formatMoney(result.annualExpenses)}</p>
                    <p>Remaining Money: ${formatMoney(result.remainingMoney)}</p>
                </div>
            `;
            container.appendChild(resultDiv);
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        populateLocations();

        const salaryInput = document.getElementById('salary');
        salaryInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            if (value !== '') {
                value = parseInt(value, 10).toLocaleString('en-US');
            }
            e.target.value = value;
        });
    });
    </script>
</body>
</html>
